<div id = "feedback-tab" style="cursor:pointer;height:90px; width:35px;border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-style: solid solid solid none; border-top-color: rgb(255, 255, 255); border-right-color: rgb(255, 255, 255); border-bottom-color: rgb(255, 255, 255); border-top-left-radius: 0px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 0px; -webkit-box-shadow: rgba(255, 255, 255, 0.247059) 1px 1px 1px inset, rgba(0, 0, 0, 0.498039) 0px 1px 2px; box-shadow: rgba(255, 255, 255, 0.247059) 1px 1px 1px inset, rgba(0, 0, 0, 0.498039) 0px 1px 2px; font-style: normal; font-variant: normal; font-weight: bold; font-size: 14px; line-height: 1em; font-family: Arial, sans-serif; position: fixed; left: 0px; top: 50%; z-index: 9999; margin-top: -62px;background: url(http://widget.uservoice.com/dcache/widget/feedback-tab.png?t=Feedback&c=ffffff&r=90) 50% 10px no-repeat rgb(8, 167, 5); "></div>
<div id="dialog-form-suggest" class="dialog-all dialog-form">
  <span class="dialog-close">x</span><br>
  <div style="width:100%;text-align:center;"><b>Suggest a Feature</b></div>
  <%=form_for :feedback_email, :url =>{:controller =>'feedback', :action =>'feedback_email'}, :remote =>true do |f|%>
    <%=f.hidden_field :type, :value =>"Suggest Feature" %>
    <%=f.hidden_field :sender,:value =>current_user %>
    <%=f.label :feedback_subject,"Subject",{:style =>"font-weight:normal"} %>
    <%=f.text_field :feedback_subject %>
    <%=f.label :feedback_text,"Description",{:style =>"font-weight:normal"} %>
    <%=f.text_area :feedback_text , {:rows=> 5, :style=>"font-size:13px;"}%>
    <%=submit_tag "Submit", {:class => "button button-warning feedback-submit", :style =>"font-size:12px"}%>
    <button class="button button-info dialog-cancel" style="float:right;font-size:12px">Cancel</button>
    <span class="feedback-spinner" style="font-size:12px"></span>
  <%end%>
</div>
<div id="dialog-form-report" class="dialog-all dialog-form">
  <span class="dialog-close">x</span><br>
  <div style="width:100%;text-align:center;"><b>Report a Problem</b></div>
  <%=form_for :feedback_email, :url =>{:controller =>'feedback', :action =>'feedback_email'}, :remote =>true do |f|%>
  	<%=f.hidden_field :type, :value =>"Report Problem" %>
  	<%=f.hidden_field :sender,:value =>current_user %>
    <%=f.label :feedback_subject,"Subject",{:style =>"font-weight:normal"} %>
    <%=f.text_field :feedback_subject %>
    <%=f.label :feedback_text,"Description",{:style =>"font-weight:normal"} %>
    <%=f.text_area :feedback_text ,{:rows=> 5, :style=>"font-size:13px;"}%>
    <%=submit_tag "Submit", :class => "button button-warning feedback-submit",:style =>"font-size:12px"%>
    <button class="button button-info dialog-cancel" style="float:right;font-size:12px">Cancel</button>
    <span class="feedback-spinner" style="font-size:12px"></span>
  <%end%>
</div>
<div id="dialog-main" class="dialog-all" title="Feedback">
	<span class="dialog-close">x</span>
	<button class="button button-warning" id="suggest" style="width:100%;font-size:12px;margin-bottom:5px;padding:3px">Suggest a Feature</button>
	<hr class="hr">&nbsp;or&nbsp;<hr class="hr">
	<button class="button button-info" id="report" style="width:100%;font-size:12px;margin-top:8px;padding:3px">Report a Problem</button>
</div>

<script>
jQuery(function(){jQuery(".ui-dialog-titlebar").hide();});


jQuery(".dialog-cancel").click(function(){
	jQuery(".dialog-all").dialog("close");
	return false;
});

jQuery(".dialog-all").dialog({
	autoOpen: false,
    modal: false,
    draggable: false,
    resizable: false,
    dialogClass: "fixed-dialog",
	show:{
		effect:"fade",
		duration:400,
	},
	hide:{
		effect:"fade",
		duration:400,
	},
	position: {
      	my: "left+10",
      	at: "right",
      	of: "#feedback-tab",
    },
});

jQuery( ".dialog-form" ).dialog({
	  height: 340,
	  width: 250,
});

jQuery( "#dialog-main" ).dialog({
	  height: 160,
	  width: 150,
});

jQuery(".hr").css({
	"border-top":"1px solid #000000",
	"display":"inline-block",
	"width":"39%",
	"margin":"0px",
});

jQuery(".dialog-close").css({
	"float":"right",
	"color":"#aaa",
	"margin-bottom":"10px",
	"font-size":"16px",
	"font-weight":"bold",
	"cursor":"pointer",
});

jQuery(".fixed-dialog").css
({
	
	"left": "0px", 
	"top": "50%",
	"z-index": "9999",
	"margin-top": "-62px",
	"position": "fixed", 
});

jQuery(".fixed-dialog form").css
({
	"margin-top": "10px",
});

jQuery("#feedback-tab").click(function(){
	if(!jQuery("#dialog-main").dialog("isOpen")){
		jQuery(".dialog-all").dialog("close");
		jQuery("#dialog-main").dialog("open");
	}
	else
		jQuery(".dialog-all").dialog("close");
});

jQuery("#suggest").click(function(){	
	jQuery("#dialog-form-suggest").dialog("open");
	jQuery("#dialog-main").dialog("close");
});

jQuery("#report").click(function(){
	jQuery("#dialog-form-report").dialog("open");
	jQuery("#dialog-main").dialog("close");
});

jQuery(".dialog-close").click(function(){
	jQuery(".dialog-all").dialog("close");
});

jQuery(".feedback-submit").click(function(){
	jQuery(".feedback-spinner").html("&nbsp;processing&nbsp;<img height='10px' width='10px' src='http://d3fildg3jlcvty.cloudfront.net/20140604-01/graphics/ajax-loader.gif' />");
	jQuery(".dialog-cancel").attr("disabled","disabled");
	setTimeout(function(){jQuery(".feedback-submit").attr("disabled","disabled");},1000);
})
</script>
