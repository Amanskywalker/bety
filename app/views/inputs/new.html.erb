<h1>New input</h1>

<% form_for @input, :html => { :multipart => true } do |f| %>
  <%= f.error_messages %>

  <p>
    <%= f.label :site %><br />
    <%= f.select :site_id, Site.all.collect { |p| [ p.select_default, p.id ] }, {} %>
  </p>
  <p>
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </p>
  <p>
    <%= f.label :file_id, "File ID" %><br />
    <%= f.text_field :file_id %>
  </p>
  <p>
    <%= f.label :parent %><br />
    <%= f.select :parent_id, Input.all.collect { |p| [ p.select_default, p.id ] }, { :include_blank => true } %>
  </p>
   <p>
    <%= f.label :start_date %><br />
    <%= f.datetime_select :start_date, { :start_year => 1800, :end_year => 2155, :include_blank => "0000", :default => "0000"} %>
  </p>
  <p>
    <%= f.label :end_date %><br />
    <%= f.datetime_select :end_date, { :start_year => 1800, :end_year => 2155, :include_blank => "0000", :default => "0000"} %>
  </p>
  <p>
    <%= f.label :raw, "Raw?" %><br />
    <%= f.select :raw, [["True",true],['False',false]], :selected => false %>
  </p>
  <p>
    <%= f.label :access_level %><br />
    <%= f.select :access_level, [["1.Restricted",1],['2.EBI Researchers',2],['3.External Researchers',3],['4.Public',4]], :selected => current_user.access_level %>
  </p>
  <p>
    <%= f.label :user %><br />
    <%= f.select :user_id, User.all.collect { |p| [ p.select_default, p.id ] }, {} %>
  </p>
  <p>
    <%= f.label :notes %><br />
    <%= f.text_area :notes %>
  </p>
  <h3>Attach file</h3>
  <em>New file upload will be integrated into this page in the future, the link below will take you to the upload page</em><br />
  <%= link_to 'Create new file', new_dbfile_path %><br />
  <!--
  <h3>Attach file</h3>
  <em>Not required</em>
  <p>
    <#%= label_tag :attach_file %><br />
    <#%= file_field 'file[upload]', 'datafile' %>
  </p>
  <p>
    <#%= label_tag :format %><br />
    <#%= select_tag 'file[format_id]', Format.all.collect { |p| [ p.select_default, p.id ] }, { :include_blank => true } -%>
  </p>
  <em>These will autopopulate if you upload a file:</em>
  <p>
    <#%= label_tag :file_name %><br />
    <#%= text_field_tag 'file[file_name]' %>
  </p>
  <p>
    <#%= label_tag :file_path %><br />
    <#%= text_field_tag 'file[file_path]' %>
  </p>
  <p>
    <#%= label_tag :machine_id %><br />
    <#%= text_field_tag 'file[machine_id]' %>
  </p>
  -->
  <p>
    <%= f.submit 'Create' %>
  </p>
<% end %>

<%= link_to 'Back', inputs_path %>
