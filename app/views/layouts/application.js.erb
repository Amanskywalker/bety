// Update table with search results:
jQuery('.simple_search_table_<%= @iteration -%>').html('<%= escape_javascript(render("#{controller_name}/index_table")) %>');

// Reset values of hidden variables:
jQuery('#simple_search #direction').val('<%= sort_direction %>');
jQuery('#simple_search #sort').val('<%= sort_column %>');

// Reset event handlers:
jQuery('#simple_search input').keyup(search_function);
jQuery('#simple_search select').change(search_function);

// Make cursor go to the end when search box gets focus ...
jQuery('#search').focus(
    function() {
        this.selectionStart = this.selectionEnd = 100; // use a large enough value so that the cursor is at the end of the text
    }
);
// ... and then actually set the focus there:
jQuery('#search').focus();
