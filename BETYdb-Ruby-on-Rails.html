<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
</head>
<body>
<h1 id="ruby-on-rails">Ruby-on-Rails</h1>
<h2 id="deploying-a-new-version">Deploying a new version:</h2>
<ol style="list-style-type: decimal">
<li>test on <code>pecandev.igb.illinois.edu:/usr/local/ebi</code></li>
<li>test on <code>ebi-forecast.igb.illinois.edu:/usr/local/beta</code></li>
<li>deploy on <code>ebi-forecast.igb.illinois.edu:/usr/local/ebi</code></li>
</ol>
<p><code>{bash} cd /usr/local/ebi git status git pull touch tmp/restart.txt</code></p>
<h2 id="commenting-in-the-rails-models">Commenting in the Rails Models</h2>
<p>Example of a properly commented citation model ( /app/models/citations.rb ): <a href="https://gist.github.com/e68fea1baa070e68b984">https://gist.github.com/e68fea1baa070e68b984</a></p>
<p>And a properly commented covariates model ( /app/models/covariates.rb ): <a href="https://gist.github.com/5d0d96d7be1b1fd7b47c">https://gist.github.com/5d0d96d7be1b1fd7b47c</a></p>
<h2 id="introduction-to-mvc">Introduction to MVC</h2>
<h2 id="source-code-map">Source Code Map</h2>
<h2 id="misc.-information">Misc. Information</h2>
<h3 id="providing-model-output-for-download">Providing model output for download</h3>
<p>Access to download model output is in app/views/maps/locations_yields.html.erb</p>
<h3 id="related-issues-commits">Related Issues / Commits:</h3>
<p>https://github.com/PecanProject/bety/commit/7b7d56fdf4c577fa14d65fcf81c677f5a4bf0633</p>
<h2 id="testing">Testing</h2>
<p>As of commit 92ec3eed Our application has a quick and easy way to setup a test environment.</p>
<ol style="list-style-type: decimal">
<li><p>Create a test database, and have the login credentials for that database in /config/database.yml</p>
<pre><code>$ mysql -u root -p
&gt; create database bety_test;
&gt; grant all privileges on bety to bety_user@localhost;
&gt; exit;</code></pre></li>
<li><p>Config the connection to the bety_test in RAILS_DIR/config/database.yml</p>
<pre><code>test:
  adapter: mysql2
  encoding: latin1 
  reconnect: false
  database: ebi_test
  pool: 5
  username: bety_user
  password: somepassword</code></pre></li>
<li><p>Build up the test database from the current schema:</p>
<pre><code>$ rake db:test:load</code></pre></li>
<li><p>Load the fixtures ( essentially dummy-data used for testing )</p>
<pre><code>$ rake db:fixtures:load RAILS_ENV=test</code></pre></li>
<li><p>Run the tests</p>
<pre><code>$ rspec spec/</code></pre>
... OR ...</li>
<li><p>Run a specific individual test</p>
<pre><code>$ rspec spec/features/user_integration_spec.rb</code></pre></li>
<li><p>Expect to see some kind of output like this:</p>
<pre><code>Finished in 13.73 seconds
29 examples, 0 failures</code></pre></li>
</ol>
</body>
</html>
